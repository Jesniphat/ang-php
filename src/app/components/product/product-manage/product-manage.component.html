<form class="ui form" #productForm="ngForm">
    <h4 class="ui dividing header">Product control</h4>
    <div class="two fields">
        <div class="field">
            <label>Category List</label>
            <select class="ui fluid dropdown" id="categoryList" name="categoryList" [(ngModel)]="product.category">
                <option *ngFor="let item of categoryList" [value]='item.value'>
                    {{item.label}}
                </option>
            </select>
        </div>
        <div class="field">
            <label>
                <span>Product Name* </span> 
            </label>
            <div class="field">
                <input type="text" id="productName" placeholder="Product Name" [(ngModel)]="product.name" 
                name="name" #name="ngModel" required minlength="4" maxlength="20">
                <span>
                    <span *ngIf="name.errors && (name.dirty || name.touched)" class="ui pointing red basic label">
                        <span [hidden]="!name.errors.required">
                            <i class="remove circle outline icon"></i>
                            Name is required
                        </span>
                        <span [hidden]="!name.errors.minlength">
                            <i class="remove circle outline icon"></i>
                            Name must be at least 4 characters long.
                        </span>
                        <span [hidden]="!name.errors.maxlength">
                            <i class="remove circle outline icon"></i>
                            Name cannot be more than 20 characters long.
                        </span>
                    </span>
                </span>
            </div>
        </div>
    </div>

    <div class="two fields">
        <div class="field">
            <label>
                <span>Product Price* </span>
            </label>
            <div class="field">
                <input type="number" id="productPrice" placeholder="Product price" [(ngModel)]="product.price" 
                name="price" #price="ngModel" required />
                <span [hidden]="price.valid || price.pristine">
                    <span class="ui pointing red basic label">
                        <i class="remove circle outline icon"></i>
                        Price is required
                    </span>
                </span>
            </div>
        </div>
        <div class="field">
            <label>
                <span>Product Qty* </span>
            </label>
            <div class="field">
                <input type="number" id="productQty" placeholder="Product qty" [(ngModel)]="product.qty" 
                name="qty" #qty="ngModel" required />
                <span [hidden]="qty.valid || qty.pristine">
                    <span class="ui pointing red basic label">
                        <i class="remove circle outline icon"></i>
                        Qty is required
                    </span>
                </span>
            </div>
        </div>
    </div>

    <div class="two fields">
        <div class="field">
            <label>Product image</label>
            <div class="field">
                <input type="file" id="productImage" placeholder="Product image" [(ngModel)]="product.productImage" 
                (change)="uploadFile($event)" name="productImage" #productImage />
            </div>
        </div>
        <div class="field">
            <label>
                <span>Product Description</span>
            </label>
            <div class="field">
                <textarea type="text" rows="1" placeholder="Description" id="productDesc" [(ngModel)]="product.desc" 
                name="desc"></textarea>
            </div>
        </div>
    </div>

    <div class="two fields">
        <div class="field">
            <label>Recommend product</label>
            <div class="field">
                <div class="ui checkbox">
                    <input type="checkbox" name="recommend" [(ngModel)]="product.recommend" (change)="checkRecommend()">
                    <label>Recommend</label>
                </div>
            </div>
        </div>
        <div class="field">
            
        </div>
    </div>

    <button class="ui primary button" id="saveProduct" type="submit" [disabled]="productForm.form.invalid" (click)="checkBeforSave()">Submit</button>
    <button class="ui button" id="cancelAll" type="submit" (click)="reset()">Cancel</button>
</form>

<br/>
<div class="ui special cards">
  <div class="card" *ngFor="let file of uploadedFiles; let x = index;">
    <div class="blurring dimmable image">
      <div class="ui dimmer">
        <div class="content">
          <div class="center">
            <div class="ui inverted button">Add Friend</div>
          </div>
        </div>
      </div>
      <img [src]="file.productpic_path">
    </div>
    <div class="content">
      <!--<a class="header">Team Fu</a>-->
      <!--<div class="meta">
        <span class="date">cover</span>
      </div>-->
      <div class="ui radio checkbox">
        <input type="radio" name="cover" [value]="file.id" (change)="setCoverPic(file.id)" [checked]="file.cover=='Y'">
        <label>Cover</label>
      </div>
    </div>
    <div class="extra content">
      <a (click)="beforeRemoveImg(file.id, x)">
        <i class="trash icon"></i>
        Delete
      </a>
    </div>
  </div>
</div>


<div class="ui basic modal" id="productSaveModel">
  <div class="ui icon header">
    <i class="archive icon"></i>
    {{warningmsg}}
  </div>
  <div class="content">
    <p>{{dialogmsg}}</p>
  </div>
  <div class="actions">
    <div class="ui red basic cancel inverted button">
      <i class="remove icon"></i>
      No
    </div>
    <div class="ui green ok inverted button" (click)="saveProduct()">
      <i class="checkmark icon"></i>
      Yes
    </div>
  </div>
</div>

<div class="ui small modal" id="productImgModel">
  <div class="header">Delete product pictuer</div>
  <div class="content">
    <p>Do you want to delete this product pictuer?</p>
  </div>
  <div class="actions">
    <div class="ui negative button">NO</div>
    <div class="ui positive right labeled icon button" (click)="removeImg()">YES</div>
  </div>
</div>

<!--<p>The hero's birthday is {{ birthday | date:"MM/dd/yy" }} </p>-->